{"version":3,"sources":["webpack:///merge_conflicts.b36807a4dbad1dca639f.bundle.js","webpack:///./merge_conflicts/mixins/line_conflict_actions.js","webpack:///./merge_conflicts/components/inline_conflict_lines.js","webpack:///./merge_conflicts/merge_conflict_service.js","webpack:///./merge_conflicts/components/diff_file_editor.js","webpack:///./merge_conflicts/merge_conflict_store.js","webpack:///./merge_conflicts/merge_conflicts_bundle.js","webpack:///./merge_conflicts/components/parallel_conflict_lines.js","webpack:///./merge_conflicts/mixins/line_conflict_utils.js"],"names":["webpackJsonp","5AFF","module","exports","global","mergeConflicts","actions","methods","handleSelected","file","sectionId","selection","gl","mergeConflictsStore","window","6wRZ","__webpack_exports__","__webpack_require__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_vue__","inlineConflictLines","extend","props","mixins","utils","7+Qt","$","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","i","length","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","mergeConflictsService","options","this","conflictsPath","resolveConflictsPath","ajax","dataType","url","data","JSON","stringify","contentType","method","call","TbQ9","_defineProperty","obj","diffFileEditor","onCancelDiscardConfirmation","Function","onAcceptDiscardConfirmation","saved","loading","fileLoaded","originalContent","computed","classObject","is-loading","watch","val","resetEditorContent","loadEditor","mounted","_this","get","content_path","done","content","$el","querySelector","fileContent","document","createTextNode","textContent","editor","ace","edit","$blockScrolling","Infinity","getSession","setMode","blob_ace_mode","on","saveDiffResolution","fail","Flash","always","getValue","resolveEditChanged","promptDiscardConfirmation","setValue","cancelDiscardConfirmation","acceptDiscardConfirmation","WMxC","__WEBPACK_IMPORTED_MODULE_1_js_cookie__","__WEBPACK_IMPORTED_MODULE_1_js_cookie___default","n","diffViewType","a","VIEW_TYPES","INLINE","PARALLEL","CONFLICT_TYPES","TEXT","TEXT_EDITOR","state","isLoading","hasError","isSubmitting","isParallel","conflictsData","setConflictsData","decorateFiles","files","commitMessage","commit_message","sourceBranch","source_branch","targetBranch","target_branch","shortCommitSha","commit_sha","slice","forEach","resolutionData","resolveMode","INTERACTIVE_RESOLVE_MODE","filePath","getFilePath","iconClass","blob_icon","blobPath","blob_path","type","showEditor","setInlineLine","setParallelLine","_this2","inlineLines","sections","section","currentLineType","conflict","lines","id","push","getHeadHeaderLine","line","lineType","richText","decorateLineForInlineView","getOriginHeaderLine","_this3","parallelLines","linesObj","left","right","getLineForParallelView","checkLineLengths","len","setLoadingState","setErrorState","setFailedRequest","message","errorMessage","getConflictsCount","count","getConflictsCountText","setViewType","viewType","diffView","set","buttonTitle","isHeader","isHead","isSelected","isUnselected","hasConflict","isOrigin","hasMatch","rich_text","old_line","new_line","lineNumber","old_path","new_path","diff","setPromptConfirmationState","setFileResolveMode","mode","restoreFileLinesState","isLeftMatch","isRightMatch","isReadyToCommit","hasCommitMessage","trim","unresolved","l","numberConflicts","resolvedConflicts","keys","j","k","getCommitButtonText","initial","getCommitData","commitData","addFile","_this4","markLine","hasSameId","setSubmitState","fileTextTypePresent","some","f","dIvF","conflictsEl","dataset","MergeConflictsResolverApp","el","components","diff-file-editor","inline-conflict-lines","parallel-conflict-lines","parallelConflictLines","conflictsCountText","readyToCommit","commitButtonText","showDiffViewTypeSwitcher","created","fetchConflictsData","error","$nextTick","syntaxHighlight","handleViewTypeChange","onClickResolveModeButton","commit","submitResolveConflicts","location","href","redirect_to","yEia","template","zALn","lineCssClass","head","origin","match","selected","unselected"],"mappings":"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","file":"merge_conflicts.b36807a4dbad1dca639f.bundle.js","sourcesContent":["webpackJsonp([15],{\n\n/***/ \"5AFF\":\n/***/ (function(module, exports) {\n\n/* eslint-disable no-param-reassign, comma-dangle */\n\n(function (global) {\n  global.mergeConflicts = global.mergeConflicts || {};\n\n  global.mergeConflicts.actions = {\n    methods: {\n      handleSelected: function handleSelected(file, sectionId, selection) {\n        gl.mergeConflicts.mergeConflictsStore.handleSelected(file, sectionId, selection);\n      }\n    }\n  };\n})(window.gl || (window.gl = {}));\n\n/***/ }),\n\n/***/ \"6wRZ\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"JTVE\");\n/* eslint-disable no-param-reassign, comma-dangle */\n\n\n\n(function (global) {\n  global.mergeConflicts = global.mergeConflicts || {};\n\n  global.mergeConflicts.inlineConflictLines = __WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].extend({\n    props: {\n      file: Object\n    },\n    mixins: [global.mergeConflicts.utils, global.mergeConflicts.actions]\n  });\n})(window.gl || (window.gl = {}));\n\n/***/ }),\n\n/***/ \"7+Qt\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function($) {var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/* eslint-disable no-param-reassign, comma-dangle */\n\n(function (global) {\n  global.mergeConflicts = global.mergeConflicts || {};\n\n  var mergeConflictsService = function () {\n    function mergeConflictsService(options) {\n      _classCallCheck(this, mergeConflictsService);\n\n      this.conflictsPath = options.conflictsPath;\n      this.resolveConflictsPath = options.resolveConflictsPath;\n    }\n\n    _createClass(mergeConflictsService, [{\n      key: 'fetchConflictsData',\n      value: function fetchConflictsData() {\n        return $.ajax({\n          dataType: 'json',\n          url: this.conflictsPath\n        });\n      }\n    }, {\n      key: 'submitResolveConflicts',\n      value: function submitResolveConflicts(data) {\n        return $.ajax({\n          url: this.resolveConflictsPath,\n          data: JSON.stringify(data),\n          contentType: 'application/json',\n          dataType: 'json',\n          method: 'POST'\n        });\n      }\n    }]);\n\n    return mergeConflictsService;\n  }();\n\n  global.mergeConflicts.mergeConflictsService = mergeConflictsService;\n})(window.gl || (window.gl = {}));\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"lwLq\")))\n\n/***/ }),\n\n/***/ \"TbQ9\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {Object.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"JTVE\");\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/* eslint-disable comma-dangle, quote-props, no-useless-computed-key, object-shorthand, no-new, no-param-reassign, max-len */\n/* global ace */\n/* global Flash */\n\n\n\n(function (global) {\n  global.mergeConflicts = global.mergeConflicts || {};\n\n  global.mergeConflicts.diffFileEditor = __WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].extend({\n    props: {\n      file: Object,\n      onCancelDiscardConfirmation: Function,\n      onAcceptDiscardConfirmation: Function\n    },\n    data: function data() {\n      return {\n        saved: false,\n        loading: false,\n        fileLoaded: false,\n        originalContent: ''\n      };\n    },\n\n    computed: {\n      classObject: function classObject() {\n        return {\n          'saved': this.saved,\n          'is-loading': this.loading\n        };\n      }\n    },\n    watch: _defineProperty({}, 'file.showEditor', function fileShowEditor(val) {\n      this.resetEditorContent();\n\n      if (!val || this.fileLoaded || this.loading) {\n        return;\n      }\n\n      this.loadEditor();\n    }),\n    mounted: function mounted() {\n      if (this.file.loadEditor) {\n        this.loadEditor();\n      }\n    },\n\n    methods: {\n      loadEditor: function loadEditor() {\n        var _this = this;\n\n        this.loading = true;\n\n        $.get(this.file.content_path).done(function (file) {\n          var content = _this.$el.querySelector('pre');\n          var fileContent = document.createTextNode(file.content);\n\n          content.textContent = fileContent.textContent;\n\n          _this.originalContent = file.content;\n          _this.fileLoaded = true;\n          _this.editor = ace.edit(content);\n          _this.editor.$blockScrolling = Infinity; // Turn off annoying warning\n          _this.editor.getSession().setMode('ace/mode/' + file.blob_ace_mode);\n          _this.editor.on('change', function () {\n            _this.saveDiffResolution();\n          });\n          _this.saveDiffResolution();\n        }).fail(function () {\n          new Flash('Failed to load the file, please try again.');\n        }).always(function () {\n          _this.loading = false;\n        });\n      },\n      saveDiffResolution: function saveDiffResolution() {\n        this.saved = true;\n\n        // This probably be better placed in the data provider\n        this.file.content = this.editor.getValue();\n        this.file.resolveEditChanged = this.file.content !== this.originalContent;\n        this.file.promptDiscardConfirmation = false;\n      },\n      resetEditorContent: function resetEditorContent() {\n        if (this.fileLoaded) {\n          this.editor.setValue(this.originalContent, -1);\n        }\n      },\n      cancelDiscardConfirmation: function cancelDiscardConfirmation(file) {\n        this.onCancelDiscardConfirmation(file);\n      },\n      acceptDiscardConfirmation: function acceptDiscardConfirmation(file) {\n        this.onAcceptDiscardConfirmation(file);\n      }\n    }\n  });\n})(window.gl || (window.gl = {}));\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(\"lwLq\")))\n\n/***/ }),\n\n/***/ \"WMxC\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {Object.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"JTVE\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_js_cookie__ = __webpack_require__(\"yoQO\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_js_cookie___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_js_cookie__);\n/* eslint-disable comma-dangle, object-shorthand, no-param-reassign, camelcase, no-nested-ternary, no-continue, max-len */\n\n\n\n\n(function (global) {\n  global.mergeConflicts = global.mergeConflicts || {};\n\n  var diffViewType = __WEBPACK_IMPORTED_MODULE_1_js_cookie___default.a.get('diff_view');\n  var HEAD_HEADER_TEXT = 'HEAD//our changes';\n  var ORIGIN_HEADER_TEXT = 'origin//their changes';\n  var HEAD_BUTTON_TITLE = 'Use ours';\n  var ORIGIN_BUTTON_TITLE = 'Use theirs';\n  var INTERACTIVE_RESOLVE_MODE = 'interactive';\n  var EDIT_RESOLVE_MODE = 'edit';\n  var DEFAULT_RESOLVE_MODE = INTERACTIVE_RESOLVE_MODE;\n  var VIEW_TYPES = {\n    INLINE: 'inline',\n    PARALLEL: 'parallel'\n  };\n  var CONFLICT_TYPES = {\n    TEXT: 'text',\n    TEXT_EDITOR: 'text-editor'\n  };\n\n  global.mergeConflicts.mergeConflictsStore = {\n    state: {\n      isLoading: true,\n      hasError: false,\n      isSubmitting: false,\n      isParallel: diffViewType === VIEW_TYPES.PARALLEL,\n      diffViewType: diffViewType,\n      conflictsData: {}\n    },\n\n    setConflictsData: function setConflictsData(data) {\n      this.decorateFiles(data.files);\n\n      this.state.conflictsData = {\n        files: data.files,\n        commitMessage: data.commit_message,\n        sourceBranch: data.source_branch,\n        targetBranch: data.target_branch,\n        shortCommitSha: data.commit_sha.slice(0, 7)\n      };\n    },\n    decorateFiles: function decorateFiles(files) {\n      var _this = this;\n\n      files.forEach(function (file) {\n        file.content = '';\n        file.resolutionData = {};\n        file.promptDiscardConfirmation = false;\n        file.resolveMode = DEFAULT_RESOLVE_MODE;\n        file.filePath = _this.getFilePath(file);\n        file.iconClass = 'fa-' + file.blob_icon;\n        file.blobPath = file.blob_path;\n\n        if (file.type === CONFLICT_TYPES.TEXT) {\n          file.showEditor = false;\n          file.loadEditor = false;\n\n          _this.setInlineLine(file);\n          _this.setParallelLine(file);\n        } else if (file.type === CONFLICT_TYPES.TEXT_EDITOR) {\n          file.showEditor = true;\n          file.loadEditor = true;\n        }\n      });\n    },\n    setInlineLine: function setInlineLine(file) {\n      var _this2 = this;\n\n      file.inlineLines = [];\n\n      file.sections.forEach(function (section) {\n        var currentLineType = 'new';\n        var conflict = section.conflict,\n            lines = section.lines,\n            id = section.id;\n\n\n        if (conflict) {\n          file.inlineLines.push(_this2.getHeadHeaderLine(id));\n        }\n\n        lines.forEach(function (line) {\n          var type = line.type;\n\n\n          if ((type === 'new' || type === 'old') && currentLineType !== type) {\n            currentLineType = type;\n            file.inlineLines.push({ lineType: 'emptyLine', richText: '' });\n          }\n\n          _this2.decorateLineForInlineView(line, id, conflict);\n          file.inlineLines.push(line);\n        });\n\n        if (conflict) {\n          file.inlineLines.push(_this2.getOriginHeaderLine(id));\n        }\n      });\n    },\n    setParallelLine: function setParallelLine(file) {\n      var _this3 = this;\n\n      file.parallelLines = [];\n      var linesObj = { left: [], right: [] };\n\n      file.sections.forEach(function (section) {\n        var conflict = section.conflict,\n            lines = section.lines,\n            id = section.id;\n\n\n        if (conflict) {\n          linesObj.left.push(_this3.getOriginHeaderLine(id));\n          linesObj.right.push(_this3.getHeadHeaderLine(id));\n        }\n\n        lines.forEach(function (line) {\n          var type = line.type;\n\n\n          if (conflict) {\n            if (type === 'old') {\n              linesObj.left.push(_this3.getLineForParallelView(line, id, 'conflict'));\n            } else if (type === 'new') {\n              linesObj.right.push(_this3.getLineForParallelView(line, id, 'conflict', true));\n            }\n          } else {\n            var lineType = type || 'context';\n\n            linesObj.left.push(_this3.getLineForParallelView(line, id, lineType));\n            linesObj.right.push(_this3.getLineForParallelView(line, id, lineType, true));\n          }\n        });\n\n        _this3.checkLineLengths(linesObj);\n      });\n\n      for (var i = 0, len = linesObj.left.length; i < len; i += 1) {\n        file.parallelLines.push([linesObj.right[i], linesObj.left[i]]);\n      }\n    },\n    setLoadingState: function setLoadingState(state) {\n      this.state.isLoading = state;\n    },\n    setErrorState: function setErrorState(state) {\n      this.state.hasError = state;\n    },\n    setFailedRequest: function setFailedRequest(message) {\n      this.state.hasError = true;\n      this.state.conflictsData.errorMessage = message;\n    },\n    getConflictsCount: function getConflictsCount() {\n      if (!this.state.conflictsData.files.length) {\n        return 0;\n      }\n\n      var files = this.state.conflictsData.files;\n      var count = 0;\n\n      files.forEach(function (file) {\n        if (file.type === CONFLICT_TYPES.TEXT) {\n          file.sections.forEach(function (section) {\n            if (section.conflict) {\n              count += 1;\n            }\n          });\n        } else {\n          count += 1;\n        }\n      });\n\n      return count;\n    },\n    getConflictsCountText: function getConflictsCountText() {\n      var count = this.getConflictsCount();\n      var text = count ? 'conflicts' : 'conflict';\n\n      return count + ' ' + text;\n    },\n    setViewType: function setViewType(viewType) {\n      this.state.diffView = viewType;\n      this.state.isParallel = viewType === VIEW_TYPES.PARALLEL;\n\n      __WEBPACK_IMPORTED_MODULE_1_js_cookie___default.a.set('diff_view', viewType);\n    },\n    getHeadHeaderLine: function getHeadHeaderLine(id) {\n      return {\n        id: id,\n        richText: HEAD_HEADER_TEXT,\n        buttonTitle: HEAD_BUTTON_TITLE,\n        type: 'new',\n        section: 'head',\n        isHeader: true,\n        isHead: true,\n        isSelected: false,\n        isUnselected: false\n      };\n    },\n    decorateLineForInlineView: function decorateLineForInlineView(line, id, conflict) {\n      var type = line.type;\n\n      line.id = id;\n      line.hasConflict = conflict;\n      line.isHead = type === 'new';\n      line.isOrigin = type === 'old';\n      line.hasMatch = type === 'match';\n      line.richText = line.rich_text;\n      line.isSelected = false;\n      line.isUnselected = false;\n    },\n    getLineForParallelView: function getLineForParallelView(line, id, lineType, isHead) {\n      var old_line = line.old_line,\n          new_line = line.new_line,\n          rich_text = line.rich_text;\n\n      var hasConflict = lineType === 'conflict';\n\n      return {\n        id: id,\n        lineType: lineType,\n        hasConflict: hasConflict,\n        isHead: hasConflict && isHead,\n        isOrigin: hasConflict && !isHead,\n        hasMatch: lineType === 'match',\n        lineNumber: isHead ? new_line : old_line,\n        section: isHead ? 'head' : 'origin',\n        richText: rich_text,\n        isSelected: false,\n        isUnselected: false\n      };\n    },\n    getOriginHeaderLine: function getOriginHeaderLine(id) {\n      return {\n        id: id,\n        richText: ORIGIN_HEADER_TEXT,\n        buttonTitle: ORIGIN_BUTTON_TITLE,\n        type: 'old',\n        section: 'origin',\n        isHeader: true,\n        isOrigin: true,\n        isSelected: false,\n        isUnselected: false\n      };\n    },\n    getFilePath: function getFilePath(file) {\n      var old_path = file.old_path,\n          new_path = file.new_path;\n\n      return old_path === new_path ? new_path : old_path + ' \\u2192 ' + new_path;\n    },\n    checkLineLengths: function checkLineLengths(linesObj) {\n      var left = linesObj.left,\n          right = linesObj.right;\n\n\n      if (left.length !== right.length) {\n        if (left.length > right.length) {\n          var diff = left.length - right.length;\n          for (var i = 0; i < diff; i += 1) {\n            right.push({ lineType: 'emptyLine', richText: '' });\n          }\n        } else {\n          var _diff = right.length - left.length;\n          for (var _i = 0; _i < _diff; _i += 1) {\n            left.push({ lineType: 'emptyLine', richText: '' });\n          }\n        }\n      }\n    },\n    setPromptConfirmationState: function setPromptConfirmationState(file, state) {\n      file.promptDiscardConfirmation = state;\n    },\n    setFileResolveMode: function setFileResolveMode(file, mode) {\n      if (mode === INTERACTIVE_RESOLVE_MODE) {\n        file.showEditor = false;\n      } else if (mode === EDIT_RESOLVE_MODE) {\n        // Restore Interactive mode when switching to Edit mode\n        file.showEditor = true;\n        file.loadEditor = true;\n        file.resolutionData = {};\n\n        this.restoreFileLinesState(file);\n      }\n\n      file.resolveMode = mode;\n    },\n    restoreFileLinesState: function restoreFileLinesState(file) {\n      file.inlineLines.forEach(function (line) {\n        if (line.hasConflict || line.isHeader) {\n          line.isSelected = false;\n          line.isUnselected = false;\n        }\n      });\n\n      file.parallelLines.forEach(function (lines) {\n        var left = lines[0];\n        var right = lines[1];\n        var isLeftMatch = left.hasConflict || left.isHeader;\n        var isRightMatch = right.hasConflict || right.isHeader;\n\n        if (isLeftMatch || isRightMatch) {\n          left.isSelected = false;\n          left.isUnselected = false;\n          right.isSelected = false;\n          right.isUnselected = false;\n        }\n      });\n    },\n    isReadyToCommit: function isReadyToCommit() {\n      var files = this.state.conflictsData.files;\n      var hasCommitMessage = $.trim(this.state.conflictsData.commitMessage).length;\n      var unresolved = 0;\n\n      for (var i = 0, l = files.length; i < l; i += 1) {\n        var file = files[i];\n\n        if (file.resolveMode === INTERACTIVE_RESOLVE_MODE) {\n          var numberConflicts = 0;\n          var resolvedConflicts = Object.keys(file.resolutionData).length;\n\n          // We only check for conflicts type 'text'\n          // since conflicts `text_editor` canÂ´t be resolved in interactive mode\n          if (file.type === CONFLICT_TYPES.TEXT) {\n            for (var j = 0, k = file.sections.length; j < k; j += 1) {\n              if (file.sections[j].conflict) {\n                numberConflicts += 1;\n              }\n            }\n\n            if (resolvedConflicts !== numberConflicts) {\n              unresolved += 1;\n            }\n          }\n        } else if (file.resolveMode === EDIT_RESOLVE_MODE) {\n          // Unlikely to happen since switching to Edit mode saves content automatically.\n          // Checking anyway in case the save strategy changes in the future\n          if (!file.content) {\n            unresolved += 1;\n            continue;\n          }\n        }\n      }\n\n      return !this.state.isSubmitting && hasCommitMessage && !unresolved;\n    },\n    getCommitButtonText: function getCommitButtonText() {\n      var initial = 'Commit conflict resolution';\n      var inProgress = 'Committing...';\n\n      return this.state ? this.state.isSubmitting ? inProgress : initial : initial;\n    },\n    getCommitData: function getCommitData() {\n      var commitData = {};\n\n      commitData = {\n        commit_message: this.state.conflictsData.commitMessage,\n        files: []\n      };\n\n      this.state.conflictsData.files.forEach(function (file) {\n        var addFile = {\n          old_path: file.old_path,\n          new_path: file.new_path\n        };\n\n        if (file.type === CONFLICT_TYPES.TEXT) {\n          // Submit only one data for type of editing\n          if (file.resolveMode === INTERACTIVE_RESOLVE_MODE) {\n            addFile.sections = file.resolutionData;\n          } else if (file.resolveMode === EDIT_RESOLVE_MODE) {\n            addFile.content = file.content;\n          }\n        } else if (file.type === CONFLICT_TYPES.TEXT_EDITOR) {\n          addFile.content = file.content;\n        }\n\n        commitData.files.push(addFile);\n      });\n\n      return commitData;\n    },\n    handleSelected: function handleSelected(file, sectionId, selection) {\n      var _this4 = this;\n\n      __WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].set(file.resolutionData, sectionId, selection);\n\n      file.inlineLines.forEach(function (line) {\n        if (line.id === sectionId && (line.hasConflict || line.isHeader)) {\n          _this4.markLine(line, selection);\n        }\n      });\n\n      file.parallelLines.forEach(function (lines) {\n        var left = lines[0];\n        var right = lines[1];\n        var hasSameId = right.id === sectionId || left.id === sectionId;\n        var isLeftMatch = left.hasConflict || left.isHeader;\n        var isRightMatch = right.hasConflict || right.isHeader;\n\n        if (hasSameId && (isLeftMatch || isRightMatch)) {\n          _this4.markLine(left, selection);\n          _this4.markLine(right, selection);\n        }\n      });\n    },\n    markLine: function markLine(line, selection) {\n      if (selection === 'head' && line.isHead) {\n        line.isSelected = true;\n        line.isUnselected = false;\n      } else if (selection === 'origin' && line.isOrigin) {\n        line.isSelected = true;\n        line.isUnselected = false;\n      } else {\n        line.isSelected = false;\n        line.isUnselected = true;\n      }\n    },\n    setSubmitState: function setSubmitState(state) {\n      this.state.isSubmitting = state;\n    },\n    fileTextTypePresent: function fileTextTypePresent() {\n      return this.state.conflictsData.files.some(function (f) {\n        return f.type === CONFLICT_TYPES.TEXT;\n      });\n    }\n  };\n})(window.gl || (window.gl = {}));\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(\"lwLq\")))\n\n/***/ }),\n\n/***/ \"dIvF\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {Object.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"JTVE\");\n/* eslint-disable new-cap, comma-dangle, no-new */\n/* global Flash */\n\n\n\n__webpack_require__(\"WMxC\");\n__webpack_require__(\"7+Qt\");\n__webpack_require__(\"zALn\");\n__webpack_require__(\"5AFF\");\n__webpack_require__(\"TbQ9\");\n__webpack_require__(\"6wRZ\");\n__webpack_require__(\"yEia\");\n\n$(function () {\n  var INTERACTIVE_RESOLVE_MODE = 'interactive';\n  var conflictsEl = document.querySelector('#conflicts');\n  var mergeConflictsStore = gl.mergeConflicts.mergeConflictsStore;\n  var mergeConflictsService = new gl.mergeConflicts.mergeConflictsService({\n    conflictsPath: conflictsEl.dataset.conflictsPath,\n    resolveConflictsPath: conflictsEl.dataset.resolveConflictsPath\n  });\n\n  gl.MergeConflictsResolverApp = new __WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"]({\n    el: '#conflicts',\n    data: mergeConflictsStore.state,\n    components: {\n      'diff-file-editor': gl.mergeConflicts.diffFileEditor,\n      'inline-conflict-lines': gl.mergeConflicts.inlineConflictLines,\n      'parallel-conflict-lines': gl.mergeConflicts.parallelConflictLines\n    },\n    computed: {\n      conflictsCountText: function conflictsCountText() {\n        return mergeConflictsStore.getConflictsCountText();\n      },\n      readyToCommit: function readyToCommit() {\n        return mergeConflictsStore.isReadyToCommit();\n      },\n      commitButtonText: function commitButtonText() {\n        return mergeConflictsStore.getCommitButtonText();\n      },\n      showDiffViewTypeSwitcher: function showDiffViewTypeSwitcher() {\n        return mergeConflictsStore.fileTextTypePresent();\n      }\n    },\n    created: function created() {\n      var _this = this;\n\n      mergeConflictsService.fetchConflictsData().done(function (data) {\n        if (data.type === 'error') {\n          mergeConflictsStore.setFailedRequest(data.message);\n        } else {\n          mergeConflictsStore.setConflictsData(data);\n        }\n      }).error(function () {\n        mergeConflictsStore.setFailedRequest();\n      }).always(function () {\n        mergeConflictsStore.setLoadingState(false);\n\n        _this.$nextTick(function () {\n          $('.js-syntax-highlight').syntaxHighlight();\n        });\n      });\n    },\n\n    methods: {\n      handleViewTypeChange: function handleViewTypeChange(viewType) {\n        mergeConflictsStore.setViewType(viewType);\n      },\n      onClickResolveModeButton: function onClickResolveModeButton(file, mode) {\n        if (mode === INTERACTIVE_RESOLVE_MODE && file.resolveEditChanged) {\n          mergeConflictsStore.setPromptConfirmationState(file, true);\n          return;\n        }\n\n        mergeConflictsStore.setFileResolveMode(file, mode);\n      },\n      acceptDiscardConfirmation: function acceptDiscardConfirmation(file) {\n        mergeConflictsStore.setPromptConfirmationState(file, false);\n        mergeConflictsStore.setFileResolveMode(file, INTERACTIVE_RESOLVE_MODE);\n      },\n      cancelDiscardConfirmation: function cancelDiscardConfirmation(file) {\n        mergeConflictsStore.setPromptConfirmationState(file, false);\n      },\n      commit: function commit() {\n        mergeConflictsStore.setSubmitState(true);\n\n        mergeConflictsService.submitResolveConflicts(mergeConflictsStore.getCommitData()).done(function (data) {\n          window.location.href = data.redirect_to;\n        }).error(function () {\n          mergeConflictsStore.setSubmitState(false);\n          new Flash('Failed to save merge conflicts resolutions. Please try again!');\n        });\n      }\n    }\n  });\n});\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(\"lwLq\")))\n\n/***/ }),\n\n/***/ \"yEia\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"JTVE\");\n/* eslint-disable no-param-reassign, comma-dangle */\n\n\n\n(function (global) {\n  global.mergeConflicts = global.mergeConflicts || {};\n\n  global.mergeConflicts.parallelConflictLines = __WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].extend({\n    props: {\n      file: Object\n    },\n    mixins: [global.mergeConflicts.utils, global.mergeConflicts.actions],\n    template: '\\n      <table>\\n        <tr class=\"line_holder parallel\" v-for=\"section in file.parallelLines\">\\n          <template v-for=\"line in section\">\\n            <td class=\"diff-line-num header\" :class=\"lineCssClass(line)\" v-if=\"line.isHeader\"></td>\\n            <td class=\"line_content header\" :class=\"lineCssClass(line)\" v-if=\"line.isHeader\">\\n              <strong>{{line.richText}}</strong>\\n              <button class=\"btn\" @click=\"handleSelected(file, line.id, line.section)\">{{line.buttonTitle}}</button>\\n            </td>\\n            <td class=\"diff-line-num old_line\" :class=\"lineCssClass(line)\" v-if=\"!line.isHeader\">{{line.lineNumber}}</td>\\n            <td class=\"line_content parallel\" :class=\"lineCssClass(line)\" v-if=\"!line.isHeader\" v-html=\"line.richText\"></td>\\n          </template>\\n        </tr>\\n      </table>\\n    '\n  });\n})(window.gl || (window.gl = {}));\n\n/***/ }),\n\n/***/ \"zALn\":\n/***/ (function(module, exports) {\n\n/* eslint-disable no-param-reassign, quote-props, comma-dangle */\n\n(function (global) {\n  global.mergeConflicts = global.mergeConflicts || {};\n\n  global.mergeConflicts.utils = {\n    methods: {\n      lineCssClass: function lineCssClass(line) {\n        return {\n          'head': line.isHead,\n          'origin': line.isOrigin,\n          'match': line.hasMatch,\n          'selected': line.isSelected,\n          'unselected': line.isUnselected\n        };\n      }\n    }\n  };\n})(window.gl || (window.gl = {}));\n\n/***/ })\n\n},[\"dIvF\"]);\n\n\n// WEBPACK FOOTER //\n// merge_conflicts.b36807a4dbad1dca639f.bundle.js","/* eslint-disable no-param-reassign, comma-dangle */\n\n((global) => {\n  global.mergeConflicts = global.mergeConflicts || {};\n\n  global.mergeConflicts.actions = {\n    methods: {\n      handleSelected(file, sectionId, selection) {\n        gl.mergeConflicts.mergeConflictsStore.handleSelected(file, sectionId, selection);\n      }\n    }\n  };\n})(window.gl || (window.gl = {}));\n\n\n\n// WEBPACK FOOTER //\n// ./merge_conflicts/mixins/line_conflict_actions.js","/* eslint-disable no-param-reassign, comma-dangle */\n\nimport Vue from 'vue';\n\n((global) => {\n  global.mergeConflicts = global.mergeConflicts || {};\n\n  global.mergeConflicts.inlineConflictLines = Vue.extend({\n    props: {\n      file: Object\n    },\n    mixins: [global.mergeConflicts.utils, global.mergeConflicts.actions],\n  });\n})(window.gl || (window.gl = {}));\n\n\n\n// WEBPACK FOOTER //\n// ./merge_conflicts/components/inline_conflict_lines.js","/* eslint-disable no-param-reassign, comma-dangle */\n\n((global) => {\n  global.mergeConflicts = global.mergeConflicts || {};\n\n  class mergeConflictsService {\n    constructor(options) {\n      this.conflictsPath = options.conflictsPath;\n      this.resolveConflictsPath = options.resolveConflictsPath;\n    }\n\n    fetchConflictsData() {\n      return $.ajax({\n        dataType: 'json',\n        url: this.conflictsPath\n      });\n    }\n\n    submitResolveConflicts(data) {\n      return $.ajax({\n        url: this.resolveConflictsPath,\n        data: JSON.stringify(data),\n        contentType: 'application/json',\n        dataType: 'json',\n        method: 'POST'\n      });\n    }\n  }\n\n  global.mergeConflicts.mergeConflictsService = mergeConflictsService;\n})(window.gl || (window.gl = {}));\n\n\n\n// WEBPACK FOOTER //\n// ./merge_conflicts/merge_conflict_service.js","/* eslint-disable comma-dangle, quote-props, no-useless-computed-key, object-shorthand, no-new, no-param-reassign, max-len */\n/* global ace */\n/* global Flash */\n\nimport Vue from 'vue';\n\n((global) => {\n  global.mergeConflicts = global.mergeConflicts || {};\n\n  global.mergeConflicts.diffFileEditor = Vue.extend({\n    props: {\n      file: Object,\n      onCancelDiscardConfirmation: Function,\n      onAcceptDiscardConfirmation: Function\n    },\n    data() {\n      return {\n        saved: false,\n        loading: false,\n        fileLoaded: false,\n        originalContent: '',\n      };\n    },\n    computed: {\n      classObject() {\n        return {\n          'saved': this.saved,\n          'is-loading': this.loading\n        };\n      }\n    },\n    watch: {\n      ['file.showEditor'](val) {\n        this.resetEditorContent();\n\n        if (!val || this.fileLoaded || this.loading) {\n          return;\n        }\n\n        this.loadEditor();\n      }\n    },\n    mounted() {\n      if (this.file.loadEditor) {\n        this.loadEditor();\n      }\n    },\n    methods: {\n      loadEditor() {\n        this.loading = true;\n\n        $.get(this.file.content_path)\n          .done((file) => {\n            const content = this.$el.querySelector('pre');\n            const fileContent = document.createTextNode(file.content);\n\n            content.textContent = fileContent.textContent;\n\n            this.originalContent = file.content;\n            this.fileLoaded = true;\n            this.editor = ace.edit(content);\n            this.editor.$blockScrolling = Infinity; // Turn off annoying warning\n            this.editor.getSession().setMode(`ace/mode/${file.blob_ace_mode}`);\n            this.editor.on('change', () => {\n              this.saveDiffResolution();\n            });\n            this.saveDiffResolution();\n          })\n          .fail(() => {\n            new Flash('Failed to load the file, please try again.');\n          })\n          .always(() => {\n            this.loading = false;\n          });\n      },\n      saveDiffResolution() {\n        this.saved = true;\n\n        // This probably be better placed in the data provider\n        this.file.content = this.editor.getValue();\n        this.file.resolveEditChanged = this.file.content !== this.originalContent;\n        this.file.promptDiscardConfirmation = false;\n      },\n      resetEditorContent() {\n        if (this.fileLoaded) {\n          this.editor.setValue(this.originalContent, -1);\n        }\n      },\n      cancelDiscardConfirmation(file) {\n        this.onCancelDiscardConfirmation(file);\n      },\n      acceptDiscardConfirmation(file) {\n        this.onAcceptDiscardConfirmation(file);\n      }\n    }\n  });\n})(window.gl || (window.gl = {}));\n\n\n\n// WEBPACK FOOTER //\n// ./merge_conflicts/components/diff_file_editor.js","/* eslint-disable comma-dangle, object-shorthand, no-param-reassign, camelcase, no-nested-ternary, no-continue, max-len */\n\nimport Vue from 'vue';\nimport Cookies from 'js-cookie';\n\n((global) => {\n  global.mergeConflicts = global.mergeConflicts || {};\n\n  const diffViewType = Cookies.get('diff_view');\n  const HEAD_HEADER_TEXT = 'HEAD//our changes';\n  const ORIGIN_HEADER_TEXT = 'origin//their changes';\n  const HEAD_BUTTON_TITLE = 'Use ours';\n  const ORIGIN_BUTTON_TITLE = 'Use theirs';\n  const INTERACTIVE_RESOLVE_MODE = 'interactive';\n  const EDIT_RESOLVE_MODE = 'edit';\n  const DEFAULT_RESOLVE_MODE = INTERACTIVE_RESOLVE_MODE;\n  const VIEW_TYPES = {\n    INLINE: 'inline',\n    PARALLEL: 'parallel'\n  };\n  const CONFLICT_TYPES = {\n    TEXT: 'text',\n    TEXT_EDITOR: 'text-editor'\n  };\n\n  global.mergeConflicts.mergeConflictsStore = {\n    state: {\n      isLoading: true,\n      hasError: false,\n      isSubmitting: false,\n      isParallel: diffViewType === VIEW_TYPES.PARALLEL,\n      diffViewType: diffViewType,\n      conflictsData: {}\n    },\n\n    setConflictsData(data) {\n      this.decorateFiles(data.files);\n\n      this.state.conflictsData = {\n        files: data.files,\n        commitMessage: data.commit_message,\n        sourceBranch: data.source_branch,\n        targetBranch: data.target_branch,\n        shortCommitSha: data.commit_sha.slice(0, 7),\n      };\n    },\n\n    decorateFiles(files) {\n      files.forEach((file) => {\n        file.content = '';\n        file.resolutionData = {};\n        file.promptDiscardConfirmation = false;\n        file.resolveMode = DEFAULT_RESOLVE_MODE;\n        file.filePath = this.getFilePath(file);\n        file.iconClass = `fa-${file.blob_icon}`;\n        file.blobPath = file.blob_path;\n\n        if (file.type === CONFLICT_TYPES.TEXT) {\n          file.showEditor = false;\n          file.loadEditor = false;\n\n          this.setInlineLine(file);\n          this.setParallelLine(file);\n        } else if (file.type === CONFLICT_TYPES.TEXT_EDITOR) {\n          file.showEditor = true;\n          file.loadEditor = true;\n        }\n      });\n    },\n\n    setInlineLine(file) {\n      file.inlineLines = [];\n\n      file.sections.forEach((section) => {\n        let currentLineType = 'new';\n        const { conflict, lines, id } = section;\n\n        if (conflict) {\n          file.inlineLines.push(this.getHeadHeaderLine(id));\n        }\n\n        lines.forEach((line) => {\n          const { type } = line;\n\n          if ((type === 'new' || type === 'old') && currentLineType !== type) {\n            currentLineType = type;\n            file.inlineLines.push({ lineType: 'emptyLine', richText: '' });\n          }\n\n          this.decorateLineForInlineView(line, id, conflict);\n          file.inlineLines.push(line);\n        });\n\n        if (conflict) {\n          file.inlineLines.push(this.getOriginHeaderLine(id));\n        }\n      });\n    },\n\n    setParallelLine(file) {\n      file.parallelLines = [];\n      const linesObj = { left: [], right: [] };\n\n      file.sections.forEach((section) => {\n        const { conflict, lines, id } = section;\n\n        if (conflict) {\n          linesObj.left.push(this.getOriginHeaderLine(id));\n          linesObj.right.push(this.getHeadHeaderLine(id));\n        }\n\n        lines.forEach((line) => {\n          const { type } = line;\n\n          if (conflict) {\n            if (type === 'old') {\n              linesObj.left.push(this.getLineForParallelView(line, id, 'conflict'));\n            } else if (type === 'new') {\n              linesObj.right.push(this.getLineForParallelView(line, id, 'conflict', true));\n            }\n          } else {\n            const lineType = type || 'context';\n\n            linesObj.left.push(this.getLineForParallelView(line, id, lineType));\n            linesObj.right.push(this.getLineForParallelView(line, id, lineType, true));\n          }\n        });\n\n        this.checkLineLengths(linesObj);\n      });\n\n      for (let i = 0, len = linesObj.left.length; i < len; i += 1) {\n        file.parallelLines.push([\n          linesObj.right[i],\n          linesObj.left[i]\n        ]);\n      }\n    },\n\n    setLoadingState(state) {\n      this.state.isLoading = state;\n    },\n\n    setErrorState(state) {\n      this.state.hasError = state;\n    },\n\n    setFailedRequest(message) {\n      this.state.hasError = true;\n      this.state.conflictsData.errorMessage = message;\n    },\n\n    getConflictsCount() {\n      if (!this.state.conflictsData.files.length) {\n        return 0;\n      }\n\n      const files = this.state.conflictsData.files;\n      let count = 0;\n\n      files.forEach((file) => {\n        if (file.type === CONFLICT_TYPES.TEXT) {\n          file.sections.forEach((section) => {\n            if (section.conflict) {\n              count += 1;\n            }\n          });\n        } else {\n          count += 1;\n        }\n      });\n\n      return count;\n    },\n\n    getConflictsCountText() {\n      const count = this.getConflictsCount();\n      const text = count ? 'conflicts' : 'conflict';\n\n      return `${count} ${text}`;\n    },\n\n    setViewType(viewType) {\n      this.state.diffView = viewType;\n      this.state.isParallel = viewType === VIEW_TYPES.PARALLEL;\n\n      Cookies.set('diff_view', viewType);\n    },\n\n    getHeadHeaderLine(id) {\n      return {\n        id: id,\n        richText: HEAD_HEADER_TEXT,\n        buttonTitle: HEAD_BUTTON_TITLE,\n        type: 'new',\n        section: 'head',\n        isHeader: true,\n        isHead: true,\n        isSelected: false,\n        isUnselected: false\n      };\n    },\n\n    decorateLineForInlineView(line, id, conflict) {\n      const { type } = line;\n      line.id = id;\n      line.hasConflict = conflict;\n      line.isHead = type === 'new';\n      line.isOrigin = type === 'old';\n      line.hasMatch = type === 'match';\n      line.richText = line.rich_text;\n      line.isSelected = false;\n      line.isUnselected = false;\n    },\n\n    getLineForParallelView(line, id, lineType, isHead) {\n      const { old_line, new_line, rich_text } = line;\n      const hasConflict = lineType === 'conflict';\n\n      return {\n        id,\n        lineType,\n        hasConflict,\n        isHead: hasConflict && isHead,\n        isOrigin: hasConflict && !isHead,\n        hasMatch: lineType === 'match',\n        lineNumber: isHead ? new_line : old_line,\n        section: isHead ? 'head' : 'origin',\n        richText: rich_text,\n        isSelected: false,\n        isUnselected: false\n      };\n    },\n\n    getOriginHeaderLine(id) {\n      return {\n        id: id,\n        richText: ORIGIN_HEADER_TEXT,\n        buttonTitle: ORIGIN_BUTTON_TITLE,\n        type: 'old',\n        section: 'origin',\n        isHeader: true,\n        isOrigin: true,\n        isSelected: false,\n        isUnselected: false\n      };\n    },\n\n    getFilePath(file) {\n      const { old_path, new_path } = file;\n      return old_path === new_path ? new_path : `${old_path} â ${new_path}`;\n    },\n\n    checkLineLengths(linesObj) {\n      const { left, right } = linesObj;\n\n      if (left.length !== right.length) {\n        if (left.length > right.length) {\n          const diff = left.length - right.length;\n          for (let i = 0; i < diff; i += 1) {\n            right.push({ lineType: 'emptyLine', richText: '' });\n          }\n        } else {\n          const diff = right.length - left.length;\n          for (let i = 0; i < diff; i += 1) {\n            left.push({ lineType: 'emptyLine', richText: '' });\n          }\n        }\n      }\n    },\n\n    setPromptConfirmationState(file, state) {\n      file.promptDiscardConfirmation = state;\n    },\n\n    setFileResolveMode(file, mode) {\n      if (mode === INTERACTIVE_RESOLVE_MODE) {\n        file.showEditor = false;\n      } else if (mode === EDIT_RESOLVE_MODE) {\n        // Restore Interactive mode when switching to Edit mode\n        file.showEditor = true;\n        file.loadEditor = true;\n        file.resolutionData = {};\n\n        this.restoreFileLinesState(file);\n      }\n\n      file.resolveMode = mode;\n    },\n\n    restoreFileLinesState(file) {\n      file.inlineLines.forEach((line) => {\n        if (line.hasConflict || line.isHeader) {\n          line.isSelected = false;\n          line.isUnselected = false;\n        }\n      });\n\n      file.parallelLines.forEach((lines) => {\n        const left = lines[0];\n        const right = lines[1];\n        const isLeftMatch = left.hasConflict || left.isHeader;\n        const isRightMatch = right.hasConflict || right.isHeader;\n\n        if (isLeftMatch || isRightMatch) {\n          left.isSelected = false;\n          left.isUnselected = false;\n          right.isSelected = false;\n          right.isUnselected = false;\n        }\n      });\n    },\n\n    isReadyToCommit() {\n      const files = this.state.conflictsData.files;\n      const hasCommitMessage = $.trim(this.state.conflictsData.commitMessage).length;\n      let unresolved = 0;\n\n      for (let i = 0, l = files.length; i < l; i += 1) {\n        const file = files[i];\n\n        if (file.resolveMode === INTERACTIVE_RESOLVE_MODE) {\n          let numberConflicts = 0;\n          const resolvedConflicts = Object.keys(file.resolutionData).length;\n\n          // We only check for conflicts type 'text'\n          // since conflicts `text_editor` canÂ´t be resolved in interactive mode\n          if (file.type === CONFLICT_TYPES.TEXT) {\n            for (let j = 0, k = file.sections.length; j < k; j += 1) {\n              if (file.sections[j].conflict) {\n                numberConflicts += 1;\n              }\n            }\n\n            if (resolvedConflicts !== numberConflicts) {\n              unresolved += 1;\n            }\n          }\n        } else if (file.resolveMode === EDIT_RESOLVE_MODE) {\n          // Unlikely to happen since switching to Edit mode saves content automatically.\n          // Checking anyway in case the save strategy changes in the future\n          if (!file.content) {\n            unresolved += 1;\n            continue;\n          }\n        }\n      }\n\n      return !this.state.isSubmitting && hasCommitMessage && !unresolved;\n    },\n\n    getCommitButtonText() {\n      const initial = 'Commit conflict resolution';\n      const inProgress = 'Committing...';\n\n      return this.state ? this.state.isSubmitting ? inProgress : initial : initial;\n    },\n\n    getCommitData() {\n      let commitData = {};\n\n      commitData = {\n        commit_message: this.state.conflictsData.commitMessage,\n        files: []\n      };\n\n      this.state.conflictsData.files.forEach((file) => {\n        const addFile = {\n          old_path: file.old_path,\n          new_path: file.new_path\n        };\n\n        if (file.type === CONFLICT_TYPES.TEXT) {\n          // Submit only one data for type of editing\n          if (file.resolveMode === INTERACTIVE_RESOLVE_MODE) {\n            addFile.sections = file.resolutionData;\n          } else if (file.resolveMode === EDIT_RESOLVE_MODE) {\n            addFile.content = file.content;\n          }\n        } else if (file.type === CONFLICT_TYPES.TEXT_EDITOR) {\n          addFile.content = file.content;\n        }\n\n        commitData.files.push(addFile);\n      });\n\n      return commitData;\n    },\n\n    handleSelected(file, sectionId, selection) {\n      Vue.set(file.resolutionData, sectionId, selection);\n\n      file.inlineLines.forEach((line) => {\n        if (line.id === sectionId && (line.hasConflict || line.isHeader)) {\n          this.markLine(line, selection);\n        }\n      });\n\n      file.parallelLines.forEach((lines) => {\n        const left = lines[0];\n        const right = lines[1];\n        const hasSameId = right.id === sectionId || left.id === sectionId;\n        const isLeftMatch = left.hasConflict || left.isHeader;\n        const isRightMatch = right.hasConflict || right.isHeader;\n\n        if (hasSameId && (isLeftMatch || isRightMatch)) {\n          this.markLine(left, selection);\n          this.markLine(right, selection);\n        }\n      });\n    },\n\n    markLine(line, selection) {\n      if (selection === 'head' && line.isHead) {\n        line.isSelected = true;\n        line.isUnselected = false;\n      } else if (selection === 'origin' && line.isOrigin) {\n        line.isSelected = true;\n        line.isUnselected = false;\n      } else {\n        line.isSelected = false;\n        line.isUnselected = true;\n      }\n    },\n\n    setSubmitState(state) {\n      this.state.isSubmitting = state;\n    },\n\n    fileTextTypePresent() {\n      return this.state.conflictsData.files.some(f => f.type === CONFLICT_TYPES.TEXT);\n    }\n  };\n})(window.gl || (window.gl = {}));\n\n\n\n// WEBPACK FOOTER //\n// ./merge_conflicts/merge_conflict_store.js","/* eslint-disable new-cap, comma-dangle, no-new */\n/* global Flash */\n\nimport Vue from 'vue';\n\nrequire('./merge_conflict_store');\nrequire('./merge_conflict_service');\nrequire('./mixins/line_conflict_utils');\nrequire('./mixins/line_conflict_actions');\nrequire('./components/diff_file_editor');\nrequire('./components/inline_conflict_lines');\nrequire('./components/parallel_conflict_lines');\n\n$(() => {\n  const INTERACTIVE_RESOLVE_MODE = 'interactive';\n  const conflictsEl = document.querySelector('#conflicts');\n  const mergeConflictsStore = gl.mergeConflicts.mergeConflictsStore;\n  const mergeConflictsService = new gl.mergeConflicts.mergeConflictsService({\n    conflictsPath: conflictsEl.dataset.conflictsPath,\n    resolveConflictsPath: conflictsEl.dataset.resolveConflictsPath\n  });\n\n  gl.MergeConflictsResolverApp = new Vue({\n    el: '#conflicts',\n    data: mergeConflictsStore.state,\n    components: {\n      'diff-file-editor': gl.mergeConflicts.diffFileEditor,\n      'inline-conflict-lines': gl.mergeConflicts.inlineConflictLines,\n      'parallel-conflict-lines': gl.mergeConflicts.parallelConflictLines\n    },\n    computed: {\n      conflictsCountText() { return mergeConflictsStore.getConflictsCountText(); },\n      readyToCommit() { return mergeConflictsStore.isReadyToCommit(); },\n      commitButtonText() { return mergeConflictsStore.getCommitButtonText(); },\n      showDiffViewTypeSwitcher() { return mergeConflictsStore.fileTextTypePresent(); }\n    },\n    created() {\n      mergeConflictsService\n        .fetchConflictsData()\n        .done((data) => {\n          if (data.type === 'error') {\n            mergeConflictsStore.setFailedRequest(data.message);\n          } else {\n            mergeConflictsStore.setConflictsData(data);\n          }\n        })\n        .error(() => {\n          mergeConflictsStore.setFailedRequest();\n        })\n        .always(() => {\n          mergeConflictsStore.setLoadingState(false);\n\n          this.$nextTick(() => {\n            $('.js-syntax-highlight').syntaxHighlight();\n          });\n        });\n    },\n    methods: {\n      handleViewTypeChange(viewType) {\n        mergeConflictsStore.setViewType(viewType);\n      },\n      onClickResolveModeButton(file, mode) {\n        if (mode === INTERACTIVE_RESOLVE_MODE && file.resolveEditChanged) {\n          mergeConflictsStore.setPromptConfirmationState(file, true);\n          return;\n        }\n\n        mergeConflictsStore.setFileResolveMode(file, mode);\n      },\n      acceptDiscardConfirmation(file) {\n        mergeConflictsStore.setPromptConfirmationState(file, false);\n        mergeConflictsStore.setFileResolveMode(file, INTERACTIVE_RESOLVE_MODE);\n      },\n      cancelDiscardConfirmation(file) {\n        mergeConflictsStore.setPromptConfirmationState(file, false);\n      },\n      commit() {\n        mergeConflictsStore.setSubmitState(true);\n\n        mergeConflictsService\n          .submitResolveConflicts(mergeConflictsStore.getCommitData())\n          .done((data) => {\n            window.location.href = data.redirect_to;\n          })\n          .error(() => {\n            mergeConflictsStore.setSubmitState(false);\n            new Flash('Failed to save merge conflicts resolutions. Please try again!');\n          });\n      }\n    }\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./merge_conflicts/merge_conflicts_bundle.js","/* eslint-disable no-param-reassign, comma-dangle */\n\nimport Vue from 'vue';\n\n((global) => {\n  global.mergeConflicts = global.mergeConflicts || {};\n\n  global.mergeConflicts.parallelConflictLines = Vue.extend({\n    props: {\n      file: Object\n    },\n    mixins: [global.mergeConflicts.utils, global.mergeConflicts.actions],\n    template: `\n      <table>\n        <tr class=\"line_holder parallel\" v-for=\"section in file.parallelLines\">\n          <template v-for=\"line in section\">\n            <td class=\"diff-line-num header\" :class=\"lineCssClass(line)\" v-if=\"line.isHeader\"></td>\n            <td class=\"line_content header\" :class=\"lineCssClass(line)\" v-if=\"line.isHeader\">\n              <strong>{{line.richText}}</strong>\n              <button class=\"btn\" @click=\"handleSelected(file, line.id, line.section)\">{{line.buttonTitle}}</button>\n            </td>\n            <td class=\"diff-line-num old_line\" :class=\"lineCssClass(line)\" v-if=\"!line.isHeader\">{{line.lineNumber}}</td>\n            <td class=\"line_content parallel\" :class=\"lineCssClass(line)\" v-if=\"!line.isHeader\" v-html=\"line.richText\"></td>\n          </template>\n        </tr>\n      </table>\n    `,\n  });\n})(window.gl || (window.gl = {}));\n\n\n\n// WEBPACK FOOTER //\n// ./merge_conflicts/components/parallel_conflict_lines.js","/* eslint-disable no-param-reassign, quote-props, comma-dangle */\n\n((global) => {\n  global.mergeConflicts = global.mergeConflicts || {};\n\n  global.mergeConflicts.utils = {\n    methods: {\n      lineCssClass(line) {\n        return {\n          'head': line.isHead,\n          'origin': line.isOrigin,\n          'match': line.hasMatch,\n          'selected': line.isSelected,\n          'unselected': line.isUnselected\n        };\n      }\n    }\n  };\n})(window.gl || (window.gl = {}));\n\n\n\n// WEBPACK FOOTER //\n// ./merge_conflicts/mixins/line_conflict_utils.js"],"sourceRoot":""}